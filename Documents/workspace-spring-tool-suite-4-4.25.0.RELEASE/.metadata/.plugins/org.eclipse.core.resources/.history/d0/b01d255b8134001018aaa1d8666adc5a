package com.App.HMS.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import com.App.HMS.model.MasterModel;
import com.App.HMS.serviceImpl.MasterServiceImpl;

@Controller
public class MasterController {
	
	@Autowired
	private MasterServiceImpl masterimpl;
	
	
	@GetMapping("/Commonmaster")
	public String homeMatser() {
		return "commonMaster";
	}
	
	
	@GetMapping("/master/data")
	public String masterdata(Model model) {
		model.addAttribute("master", new MasterModel());
		model.addAttribute("masterList", masterimpl.getallItem());
		return "master";
	}
	
	
	@PostMapping("/master/save")
	public String masterItemSave(@ModelAttribute MasterModel master,Model model, RedirectAttributes redirectAttributes) {
		masterimpl.save(master);
	    model.addAttribute("master", master);  // Reset the form
		model.addAttribute("masterList", masterimpl.getallItem()); // Refresh the list of items
		redirectAttributes.addFlashAttribute("successMessage", "Record saved successfully!");
		return "redirect:/master/data";
	}
	

}
